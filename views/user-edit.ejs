<!-- user-edit.ejs -->

<%- include("partials/header-admin"); -%>

<div class="container mt-5">
    <h1>Edit User</h1>
    <form action="/users/<%= user._id %>/edit" method="POST">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" value="<%= user.name %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="username" value="<%= user.username %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="isAdmin">Admin:</label>
            <select class="form-control" id="isAdmin" name="isAdmin">
                <option value="true" <% if (user.isAdmin) { %>selected<% } %>>Yes</option>
                <option value="false" <% if (!user.isAdmin) { %>selected<% } %>>No</option>
            </select>
        </div>
        <br>

        <div class="form-group">
            <label for="balance">Balance:</label>
            <input type="number" id="balance" name="balance" value="<%= user.balance %>" class="form-control" readonly>
        </div>
        <div class="form-group">
            <label for="balance">New Balance:</label>
            <input type="number" id="newBalance" name="newBalance" value="" class="form-control" placeholder="Add more credits ">
        </div>
        <div class="form-group">
            <label for="balance">Paid Credits:</label>
            <input type="number" id="paidCredits" name="paidCredits" value="<%= user.paidCredits %>" class="form-control">
        </div>
        <div class="form-group">
            <label for="balance">Unpaid Credits:</label>
            <input type="number" id="unpaidCredits" name="unpaidCredits" value="<%= user.unpaidCredits %>" class="form-control">
        </div>
        <br>
        <div class="form-group">
            <label for="balance">Waiting action:</label>
            <input type="number" id="waitingAction" name="waitingAction" value="<%= user.waitingAction %>" class="form-control">
        </div>

        <div class="form-group">
            <label for="balance">In process:</label>
            <input type="number" id="inprocess" name="inprocess" value="<%= user.inprocess %>" class="form-control">
        </div>
        
        <div class="form-group">
            <label for="balance">Success:</label>
            <input type="number" id="success" name="success" value="<%= user.success %>" class="form-control">
        </div>
        
        <div class="form-group">
            <label for="balance">Rejected:</label>
            <input type="number" id="rejected" name="rejected" value="<%= user.rejected %>" class="form-control">
        </div>

        <div class="form-group">
            <label for="balance">Cancelled:</label>
            <input type="number" id="cancelled" name="cancelled" value="<%= user.cancelled %>" class="form-control">
        </div>



        <div class="container">
            <h1 class="mt-4 mb-3">IMEI Orders</h1>

           
    
            <div class="table-responsive">
                <table class="table table-bordered table-striped">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">User</th>
                            <th scope="col">IMEI Number</th>
                            <th scope="col">Service</th>
                            <th scope="col">Price</th>
                            <th scope="col">Order Status</th>
                            <th scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% imeiOrders.forEach(imeiOrder => { %>
                            <tr>
                                <td><%= user.name %></td>
                                <td><%= imeiOrder.imeiNumber %></td>
                                <td><%=  imeiOrder.service %></td>
                                <td> $<%= imeiOrder.price  %></td>
                                <td><%= imeiOrder.status %></td>
                                <td>
                                   
                                    <a href="/users/<%= user._id %>/imeiOrder-delete/<%= imeiOrder._id %>" class="btn btn-danger">Delete</a>




                                </td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
        
        <br>
        <!-- Add more form fields for other user information as needed -->
        <button type="submit" class="btn btn-success">Update</button>
    </form>
</div>

<br><br><br>
<%- include("partials/footer"); -%>


